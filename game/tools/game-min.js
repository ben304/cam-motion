void function(e){function t(e){if(e>=LEVEL[3].SCORE)return LEVEL[3];for(var t=0;t<4;t++)if(e<=LEVEL[t].SCORE)return LEVEL[t]}function n(e){var t=e.CHANCE,n=t[Math.random()*t.length|0],r=n*5,i=r+5;return MONSTER[(Math.random()*(i-r)|0)+r]}function a(){this.phase=$("#stage>div");this.evts=u;this._reset();this._bindEvents();this._displayCurrentPhase()}var r=0,i=0,s="bounceInDown",o=function(){},u={start:o,process:o,over:o};$.extend(a.prototype,{_displayCurrentPhase:function(){$(this.phase[i]).show().addClass(s)},_bindEvents:function(){var e=this;this.phase.bind("webkitAnimationEnd",function(){$(this).removeClass(s)});$("#timer").bind("webkitAnimationEnd",function(){e.evts.over(r)})},_start:function(){this.evts.start(this._getHoles())},_reset:function(){r=0,i=0},_goto:function(e,t){var n=i;[].some.call(this.phase,function(t,r){console.log(t);if(t.className==e){n=r;return!0}});if(n!=i){$(this.phase[i]).hide();i=n;this._displayCurrentPhase();t&&t()}},_getHoles:function(){var e=$("#holes li"),t={width:120,height:120,holes:[]};e.each(function(e,n){var r=$(n).offset();t.holes.push({index:e,x:parseInt($(n).css("left")),y:parseInt($(n).css("top"))})});return t},on:function(e,t){this.evts[e]=t;return this},nextPhase:function(e){$(this.phase[i]).hide();i=Math.min(++i,this.phase.length-1);this._displayCurrentPhase();e&&e();$(this.phase[i]).hasClass("gaming")&&this._start();return this},restart:function(e){$(this.phase[i]).hide();this._reset();i=2;this.nextPhase(e)},reset:function(e){$(this.phase[i]).hide();this._reset();this._displayCurrentPhase();e&&e()},getMonster:function(){var e=t(r),i=n(e);return{level:e,monster:i}},addScore:function(e){return r+=e}});e.Game=a}(window);